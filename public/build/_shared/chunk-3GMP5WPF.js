import{d as p}from"/build/_shared/chunk-Q6XJQZ5P.js";import{b as g}from"/build/_shared/chunk-6LERFUO7.js";import{a as M}from"/build/_shared/chunk-K4PGTQBQ.js";import{d as A}from"/build/_shared/chunk-T36URGAI.js";var t=A(M(),1);var O=A(M(),1);function v(n,e){return O.useReducer((r,o)=>e[r][o]??r,n)}var P=n=>{let{present:e,children:r}=n,o=w(e),s=typeof r=="function"?r({present:o.isPresent}):t.Children.only(r),u=g(o.ref,I(s));return typeof r=="function"||o.isPresent?t.cloneElement(s,{ref:u}):null};P.displayName="Presence";function w(n){let[e,r]=t.useState(),o=t.useRef(null),s=t.useRef(n),u=t.useRef("none"),R=n?"mounted":"unmounted",[N,a]=v(R,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return t.useEffect(()=>{let i=l(o.current);u.current=N==="mounted"?i:"none"},[N]),p(()=>{let i=o.current,m=s.current;if(m!==n){let f=u.current,c=l(i);n?a("MOUNT"):c==="none"||i?.display==="none"?a("UNMOUNT"):a(m&&f!==c?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,a]),p(()=>{if(e){let i,m=e.ownerDocument.defaultView??window,d=c=>{let T=l(o.current).includes(c.animationName);if(c.target===e&&T&&(a("ANIMATION_END"),!s.current)){let E=e.style.animationFillMode;e.style.animationFillMode="forwards",i=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},f=c=>{c.target===e&&(u.current=l(o.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{m.clearTimeout(i),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else a("ANIMATION_END")},[e,a]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:t.useCallback(i=>{o.current=i?getComputedStyle(i):null,r(i)},[])}}function l(n){return n?.animationName||"none"}function I(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}export{P as a};
