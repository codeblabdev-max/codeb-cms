import{a as L}from"/build/_shared/chunk-XSDY3T46.js";import{a as N,b,c as I,d as c,f as ie}from"/build/_shared/chunk-FVPVIUHR.js";import"/build/_shared/chunk-DOIQJ27M.js";import"/build/_shared/chunk-3GMP5WPF.js";import{a as $}from"/build/_shared/chunk-PMSXDEH4.js";import{k as U}from"/build/_shared/chunk-CUW5AVGU.js";import{a as ne}from"/build/_shared/chunk-PCTR2B2R.js";import"/build/_shared/chunk-IOAK6PR3.js";import"/build/_shared/chunk-VIBQ7JRO.js";import"/build/_shared/chunk-Q6XJQZ5P.js";import{C as Y,Ca as T,G as Z,H as q,Y as ee,ca as te,da as ae,k as W,l as J,m as H,o as G,pa as re,q as Q,ra as B,ua as se,va as A,ya as oe,z as X}from"/build/_shared/chunk-I65ZP6PF.js";import{e as i}from"/build/_shared/chunk-6LERFUO7.js";import{b as O}from"/build/_shared/chunk-EMPAMISE.js";import{a as ge}from"/build/_shared/chunk-YBX7ITP5.js";import{a as he}from"/build/_shared/chunk-CW54B3GA.js";import{a as pe}from"/build/_shared/chunk-KPWQHS6G.js";import{a as V,d as _,h as R,i as M,j as z,n as j,p as P,s as y}from"/build/_shared/chunk-K4PGTQBQ.js";import{d as m}from"/build/_shared/chunk-T36URGAI.js";var de=m(pe(),1);var E=m(V(),1),we=m(ge(),1),fe=m(he(),1);var d=m(V(),1);var t=m(y(),1);function F({postId:a,postTitle:n,postUrl:f}){let[u,g]=(0,d.useState)(()=>typeof window<"u"?JSON.parse(localStorage.getItem("bookmarks")||"[]").includes(a):!1),[k,x]=(0,d.useState)(!1),s=typeof window<"u"?`${window.location.origin}${f}`:f,v=(0,d.useCallback)(()=>{if(typeof window>"u")return;let o=JSON.parse(localStorage.getItem("bookmarks")||"[]");if(u){let w=o.filter(S=>S!==a);localStorage.setItem("bookmarks",JSON.stringify(w)),g(!1)}else o.push(a),localStorage.setItem("bookmarks",JSON.stringify(o)),g(!0)},[a,u]),l=(0,d.useCallback)(async()=>{try{await navigator.clipboard.writeText(s),x(!0),setTimeout(()=>x(!1),2e3)}catch(o){console.error("\uD074\uB9BD\uBCF4\uB4DC \uBCF5\uC0AC \uC2E4\uD328:",o)}},[s]),h=(0,d.useCallback)(()=>{let o=encodeURIComponent(n),w=encodeURIComponent(s);window.open(`https://twitter.com/intent/tweet?text=${o}&url=${w}`,"_blank","width=550,height=420")},[n,s]),p=(0,d.useCallback)(()=>{let o=encodeURIComponent(s);window.open(`https://www.facebook.com/sharer/sharer.php?u=${o}`,"_blank","width=550,height=420")},[s]),C=(0,d.useCallback)(()=>{typeof window<"u"&&window.Kakao?.Share?window.Kakao.Share.sendDefault({objectType:"feed",content:{title:n,description:"\uAC8C\uC2DC\uAE00\uC744 \uD655\uC778\uD574\uBCF4\uC138\uC694!",imageUrl:"",link:{mobileWebUrl:s,webUrl:s}},buttons:[{title:"\uC790\uC138\uD788 \uBCF4\uAE30",link:{mobileWebUrl:s,webUrl:s}}]}):(l(),alert("\uCE74\uCE74\uC624\uD1A1\uC73C\uB85C \uACF5\uC720\uD558\uB824\uBA74 URL\uC744 \uBCF5\uC0AC\uD558\uC5EC \uBD99\uC5EC\uB123\uAE30 \uD574\uC8FC\uC138\uC694."))},[n,s,l]),D=(0,d.useCallback)(async()=>{if(navigator.share)try{await navigator.share({title:n,url:s})}catch(o){o.name!=="AbortError"&&console.error("\uACF5\uC720 \uC2E4\uD328:",o)}else l()},[n,s,l]);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(N,{children:[(0,t.jsx)(b,{asChild:!0,children:(0,t.jsxs)(i,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,t.jsx)(re,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"\uACF5\uC720"})]})}),(0,t.jsxs)(I,{align:"end",className:"w-48",children:[(0,t.jsx)(c,{onClick:l,children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G,{className:"mr-2 h-4 w-4 text-green-500"}),"\uBCF5\uC0AC\uB428"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee,{className:"mr-2 h-4 w-4"}),"\uB9C1\uD06C \uBCF5\uC0AC"]})}),(0,t.jsx)(ie,{}),(0,t.jsxs)(c,{onClick:D,children:[(0,t.jsx)(X,{className:"mr-2 h-4 w-4"}),"\uACF5\uC720\uD558\uAE30"]}),(0,t.jsxs)(c,{onClick:h,children:[(0,t.jsx)(oe,{className:"mr-2 h-4 w-4"}),"Twitter"]}),(0,t.jsxs)(c,{onClick:p,children:[(0,t.jsx)(q,{className:"mr-2 h-4 w-4"}),"Facebook"]}),(0,t.jsxs)(c,{onClick:C,children:[(0,t.jsx)(te,{className:"mr-2 h-4 w-4"}),"KakaoTalk"]})]})]}),(0,t.jsx)(i,{variant:"ghost",size:"sm",className:"gap-2",onClick:v,children:u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W,{className:"h-4 w-4 text-yellow-500 fill-yellow-500"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"\uBD81\uB9C8\uD06C\uB428"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"\uBD81\uB9C8\uD06C"})]})})]})}F.displayName="ShareBookmark";var e=m(y(),1);function le(){let{post:a,user:n,isAuthor:f,isAdmin:u,hasLiked:g}=j(),k=R(),x=_(),s=P(),[v,l]=(0,E.useState)(null),[h,p]=(0,E.useState)(""),C=()=>{k({_action:"like"},{method:"post",replace:!0})},D=()=>{confirm("\uC815\uB9D0 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&k({_action:"delete"},{method:"post"})},o=(r,K)=>{l(r),p(K)},w=()=>{l(null),p("")},S=r=>{s.submit({_action:"editComment",commentId:r,content:h},{method:"post"}),l(null),p("")},me=r=>{confirm("\uB313\uAE00\uC744 \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&s.submit({_action:"deleteComment",commentId:r},{method:"post"})};return(0,e.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[(0,e.jsx)("div",{className:"bg-primary/5 dark:bg-primary/10 border-y border-primary/20 dark:border-primary/30 py-6 sm:py-8 px-4",children:(0,e.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",style:{maxWidth:"1450px"},children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-center text-gray-900 dark:text-gray-100",children:a.menu.name}),(0,e.jsxs)("p",{className:"text-center text-sm sm:text-base text-muted-foreground dark:text-gray-400 mt-2",children:[a.menu.name," \uAD00\uB828 \uC815\uBCF4\uC640 \uD1A0\uB860\uC744 \uB098\uB204\uB294 \uACF5\uAC04\uC785\uB2C8\uB2E4"]})]})}),(0,e.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",style:{maxWidth:"1450px"},children:[(0,e.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,e.jsxs)(M,{to:`/${a.menu.slug}`,className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:[(0,e.jsx)(Q,{className:"h-5 w-5"}),(0,e.jsxs)("span",{children:[a.menu.name," \uAC8C\uC2DC\uD310\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30"]})]}),(f||u)&&(0,e.jsxs)(N,{children:[(0,e.jsx)(b,{asChild:!0,children:(0,e.jsx)(i,{variant:"ghost",size:"icon",children:(0,e.jsx)(Y,{className:"h-5 w-5"})})}),(0,e.jsxs)(I,{align:"end",children:[(0,e.jsxs)(c,{onClick:()=>x(`/${a.menu.slug}/${a.slug}/edit`),children:[(0,e.jsx)(B,{className:"h-4 w-4 mr-2"}),"\uC218\uC815"]}),(0,e.jsxs)(c,{onClick:D,className:"text-red-600",children:[(0,e.jsx)(A,{className:"h-4 w-4 mr-2"}),"\uC0AD\uC81C"]})]})]})]}),(0,e.jsxs)("article",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-800",children:[(0,e.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:(0,e.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:[a.isNotice&&(0,e.jsx)(ne,{variant:"destructive",className:"mr-2 align-middle",children:"\uACF5\uC9C0"}),a.title]}),(0,e.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(T,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:a.author.name||a.author.username||a.author.email.split("@")[0]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(H,{className:"h-4 w-4"}),(0,e.jsx)("time",{children:$(new Date(a.publishedAt||a.createdAt),{addSuffix:!0,locale:U})})]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(Z,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:a.views})]}),(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsx)(ae,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:a._count.comments})]})]})]})})}),(0,e.jsx)("div",{className:"p-6",children:(0,e.jsx)("div",{className:"whitespace-pre-wrap text-gray-700 dark:text-gray-300 leading-relaxed text-base sm:text-lg",children:a.content||(0,e.jsx)("span",{className:"text-gray-500 dark:text-gray-400 italic",children:"\uB0B4\uC6A9\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"})})}),(0,e.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-800",children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)(i,{variant:g?"default":"outline",size:"sm",onClick:C,disabled:!n,children:[(0,e.jsx)(se,{className:O("h-4 w-4 mr-2",g&&"fill-current")}),"\uCD94\uCC9C ",a.likes>0&&`(${a.likes})`]}),(0,e.jsx)(F,{postId:a.id,postTitle:a.title,postUrl:`/${a.menu.slug}/${a.slug}`})]})})]}),(0,e.jsxs)("div",{className:"mt-8 bg-white dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-800",children:[(0,e.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:(0,e.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["\uB313\uAE00 ",a._count.comments,"\uAC1C"]})}),n?(0,e.jsxs)(z,{method:"post",className:"p-6 border-b border-gray-200 dark:border-gray-800",children:[(0,e.jsx)("input",{type:"hidden",name:"_action",value:"comment"}),(0,e.jsx)(L,{name:"content",placeholder:"\uB313\uAE00\uC744 \uC791\uC131\uD558\uC138\uC694...",className:"w-full mb-4",rows:3}),(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsx)(i,{type:"submit",children:"\uB313\uAE00 \uC791\uC131"})})]}):(0,e.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800 text-center",children:[(0,e.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"\uB313\uAE00\uC744 \uC791\uC131\uD558\uB824\uBA74 \uB85C\uADF8\uC778\uC774 \uD544\uC694\uD569\uB2C8\uB2E4."}),(0,e.jsx)(M,{to:"/auth/login",children:(0,e.jsx)(i,{children:"\uB85C\uADF8\uC778"})})]}),(0,e.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:a.comments.length>0?a.comments.map(r=>{let ce=n?.id===r.author.id||u;return(0,e.jsx)("div",{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-start gap-3",children:[(0,e.jsx)("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:(0,e.jsx)(T,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:r.author.name||r.author.username||r.author.email.split("@")[0]}),(0,e.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:$(new Date(r.createdAt),{addSuffix:!0,locale:U})})]}),ce&&v!==r.id&&(0,e.jsxs)("div",{className:"flex items-center gap-1",children:[(0,e.jsxs)(i,{variant:"ghost",size:"sm",onClick:()=>o(r.id,r.content),className:"h-7 px-2 text-xs",children:[(0,e.jsx)(B,{className:"h-3 w-3 mr-1"}),"\uC218\uC815"]}),(0,e.jsxs)(i,{variant:"ghost",size:"sm",onClick:()=>me(r.id),className:"h-7 px-2 text-xs text-red-600 hover:text-red-700",children:[(0,e.jsx)(A,{className:"h-3 w-3 mr-1"}),"\uC0AD\uC81C"]})]})]}),v===r.id?(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(L,{value:h,onChange:ue=>p(ue.target.value),className:"w-full",rows:3}),(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,e.jsx)(i,{variant:"outline",size:"sm",onClick:w,children:"\uCDE8\uC18C"}),(0,e.jsx)(i,{size:"sm",onClick:()=>S(r.id),disabled:!h.trim(),children:"\uC800\uC7A5"})]})]}):(0,e.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:r.content})]})]})},r.id)}):(0,e.jsx)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"\uC544\uC9C1 \uB313\uAE00\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uCCAB \uBC88\uC9F8 \uB313\uAE00\uC744 \uC791\uC131\uD574\uBCF4\uC138\uC694!"})})]})]})]})}export{le as default};
